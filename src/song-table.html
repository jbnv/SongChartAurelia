<template>

  <require from="bootstrap/css/bootstrap.css"></require>
  <require from="font-awesome/css/font-awesome.css"></require>
  <require from="./decimal"></require>

  <table class="table table-hover">
    <thead>

      <tr>

    		<th show.bind="!columns.rank.hidden">
    			<div class="dropdown">
    				<a href="#" data-toggle="dropdown" class="dropdown-toggle">Rank</a>
    				<ul class="dropdown-menu">
    					<li click.trigger="setSort('rank')"><a href="#"><i class="fa fa-sort-numeric-asc"></i> Order Ascending</a></li>
    					<li click.trigger="setSort('-rank')"><a href="#"><i class="fa fa-sort-numeric-desc"></i> Order Descending</a></li>
    					<li click.trigger="columns.hide('rank')"><a href="#"><i class="fa fa-remove"></i> Remove</a></li>
    				</ul>
    			</div>
    		</th>

    		<th show.bind="!columns.title.hidden">
    			<div class="dropdown">
    				<a href="#" data-toggle="dropdown" class="dropdown-toggle">Title</a>
    				<ul class="dropdown-menu">
    					<li click.trigger="setSort('title')"><a href="#"><i class="fa fa-sort-alpha-asc"></i> Order Ascending</a></li>
    					<li click.trigger="setSort('-title')"><a href="#"><i class="fa fa-sort-alpha-desc"></i> Order Descending</a></li>
    					<li click.trigger="columns.hide('title')"><a href="#"><i class="fa fa-remove"></i> Remove</a></li>
    				</ul>
    			</div>
    		</th>

    		<th show.bind="!columns.artist.hidden">
    			<div class="dropdown">
    				<a href="#" data-toggle="dropdown" class="dropdown-toggle">Artist</a>
    				<ul class="dropdown-menu">
    					<li click.trigger="setSort('artistObject.name')"><a href="#"><i class="fa fa-sort-alpha-asc"></i> Order Ascending</a></li>
    					<li click.trigger="setSort('-artistObject.name')"><a href="#"><i class="fa fa-sort-alpha-desc"></i> Order Descending</a></li>
    					<li click.trigger="columns.hide('artist')"><a href="#"><i class="fa fa-remove"></i> Remove</a></li>
    				</ul>
    			</div>
    		</th>

    		<th show.bind="!columns.debutDate.hidden">Date</th>

    		<th show.bind="!columns.score.hidden">
    			<div class="dropdown">
    				<a href="#" data-toggle="dropdown" class="dropdown-toggle">Score</a>
    				<ul class="dropdown-menu">
    					<li click.trigger="setSort('score')"><a href="#"><i class="fa fa-sort-numeric-asc"></i> Order Ascending</a></li>
    					<li click.trigger="setSort('-score')"><a href="#"><i class="fa fa-sort-numeric-desc"></i> Order Descending</a></li>
    					<li click.trigger="columns.hide('score')"><a href="#"><i class="fa fa-remove"></i> Remove</a></li>
    				</ul>
    			</div>
    		</th>

    		<th show.bind="!columns.projectedRank.hidden"></th>

    		<th show.bind="!columns.projectedRank.hidden" style="text-align:right">
    			<div class="dropdown">
    				<a href="#" data-toggle="dropdown" class="dropdown-toggle">PR</a>
    				<ul class="dropdown-menu">
    					<li><b>Projected Rank"> (PR)</b>
    					<li click.trigger="setSort('projectedRank')"><a href="#"><i class="fa fa-sort-numeric-asc"></i> Order Ascending</a></li>
    					<li click.trigger="setSort('-projectedRank')"><a href="#"><i class="fa fa-sort-numeric-desc"></i> Order Descending</a></li>
    					<li click.trigger="columns.hide('projectedRank')"><a href="#"><i class="fa fa-remove"></i> Remove</a></li>
    				</ul>
    			</div>
    		</th>

    		<th show.bind="!columns.debutRank.hidden">
    			<div class="dropdown">
    				<a href="#" data-toggle="dropdown" class="dropdown-toggle">D</a>
    				<ul class="dropdown-menu">
    					<li><b>Debut Rank (D)</b>
    					<li click.trigger="setSort('debutRank')"><a href="#"><i class="fa fa-sort-numeric-asc"></i> Order Ascending</a></li>
    					<li click.trigger="setSort('-debutRank')"><a href="#"><i class="fa fa-sort-numeric-desc"></i> Order Descending</a></li>
    					<li click.trigger="columns.hide('debutRank')"><a href="#"><i class="fa fa-remove"></i> Remove</a></li>
    				</ul>
    			</div>
    		</th>

    		<th show.bind="!columns.peakRank.hidden">
    			<div class="dropdown">
    				<a href="#" data-toggle="dropdown" class="dropdown-toggle">P</a>
    				<ul class="dropdown-menu">
    					<li><b>Peak Rank (P)</b></li>
    					<li click.trigger="setSort('peakRank')"><a href="#"><i class="fa fa-sort-numeric-asc"></i> Order Ascending</a></li>
    					<li click.trigger="setSort('-peakRank')"><a href="#"><i class="fa fa-sort-numeric-desc"></i> Order Descending</a></li>
    					<li click.trigger="columns.hide('peakRank')"><a href="#"><i class="fa fa-remove"></i> Remove</a></li>
    				</ul>
    			</div>
    		</th>

    		<th show.bind="!columns.duration.hidden">
    			<div class="dropdown">
    				<a href="#" data-toggle="dropdown" class="dropdown-toggle">M</a>
    				<ul class="dropdown-menu">
    					<li><b>Duration (Months) (M)</b></li>
    					<li click.trigger="setSort('duration')"><a href="#"><i class="fa fa-sort-numeric-asc"></i> Order Ascending</a></li>
    					<li click.trigger="setSort('-duration')"><a href="#"><i class="fa fa-sort-numeric-desc"></i> Order Descending</a></li>
    					<li click.trigger="columns.hide('duration')"><a href="#"><i class="fa fa-remove"></i> Remove</a></li>
    				</ul>
    			</div>
    		</th>

    		<th show.bind="!columns.timeToPeak.hidden">
    			<div class="dropdown">
    				<a href="#" data-toggle="dropdown" class="dropdown-toggle">H</a>
    				<ul class="dropdown-menu">
    					<li><b>Time to Peak (H)</b></li>
    					<li click.trigger="setSort('timeToPeak')"><a href="#"><i class="fa fa-sort-numeric-asc"></i> Order Ascending</a></li>
    					<li click.trigger="setSort('-timeToPeak')"><a href="#"><i class="fa fa-sort-numeric-desc"></i> Order Descending</a></li>
    					<li click.trigger="columns.hide('timeToPeak')"><a href="#"><i class="fa fa-remove"></i> Remove</a></li>
    				</ul>
    			</div>
    		</th>

    		<th show.bind="!columns.projectedRank.hidden" repeat.for="index of [1,2,3,4]" style="text-align:right">
    			<div class="dropdown">
    				<a href="#" data-toggle="dropdown" class="dropdown-toggle">W${index}</a>
    				<ul class="dropdown-menu">
    				</ul>
    			</div>
    		</th>

    	</tr>

    </thead>
    <tbody>

      <tr repeat.for="song of songs">

        <td show.bind="!columns.rank.hidden">${song.rank}</td>
        <td show.bind="!columns.title.hidden"><a href="#/song/${song.instanceSlug}">${song.title}</a></td>
        <td show.bind="!columns.artistName.hidden">
          <span repeat.for="artist of song.artists">
            <a href="#/artist/${artist.instanceSlug}">${artist.title}</a>
            <br>
          </span>
        </td>
        <td show.bind="!columns.debutDate.hidden">${song.debut}</td>
        <td show.bind="!columns.score.hidden">${song.score}</td>
        <td show.bind="!columns.projectedRank.hidden"><i class="fa fa-star text-primary" show.bind="song.isDebut"></i></th>
        <td show.bind="!columns.projectedRank.hidden" style="text-align:right">${song.projectedRank}</td>
        <td show.bind="!columns.debutRank.hidden">${song.debutRank}</td>
        <td show.bind="!columns.peakRank.hidden">${song.peakRank}</td>
        <td show.bind="!columns.duration.hidden"><span show.bind="!columns.projectedRank.hidden">${song.monthIndex+1} / </span>${song.duration}</td>
        <td show.bind="!columns.timeToPeak.hidden">${song.timeToPeak }</td>
        <td show.bind="!columns.projectedRank.hidden" repeat.for="index of [0,1,2,3]" style="text-align:right">${song.ranks[song.monthIndex*4+index]}</td>

      </tr>

    </tbody>

  </table>

</template>
